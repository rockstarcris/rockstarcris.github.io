import{s as tt,a as b,f as u,J as nt,d as p,c as C,g as _,h as k,A as T,j as c,i as I,u as i,x as at,l as G,m as W,K as $,L as ot,M as Be,v as lt,N as it,O as rt,n as st,y as _e,e as Qe,P as ct,w as ut}from"../chunks/scheduler.a665a98d.js";import{S as _t,i as dt,b as Xe,d as Ge,m as We,a as K,t as le,c as Ye,e as Ze,g as et}from"../chunks/index.d0ee8e99.js";import{e as ft,t as pt}from"../chunks/state.1193ba7e.js";import{q as mt,b as ht,u as Ue,r as Fe,a as Re}from"../chunks/index.esm.a942cfdc.js";import{p as vt}from"../chunks/mantener-con-vida.function.15fc06fb.js";import{T as bt}from"../chunks/Toaster.79af22b6.js";import{p as Ct}from"../chunks/cargando.store.a942b023.js";import{a as xt}from"../chunks/anuncio.store.6034a0d0.js";import{t as Tt}from"../chunks/toast.store.4e9ed28a.js";import{Q as gt}from"../chunks/query-db.component.414e566e.js";import{I as Pt}from"../chunks/icon.component.dea48fc4.js";import{c as yt}from"../chunks/create-form.bb82cb25.js";import{v as $e}from"../chunks/v4.a960c1f4.js";const Et=!0;function Ot({params:r}){return{anuncio_id:r.anuncio_id}}const Yt=Object.freeze(Object.defineProperty({__proto__:null,load:Ot,prerender:Et},Symbol.toStringTag,{value:"Module"}));function kt(r,e,t){const n=r.slice();n[12]=e[t],n[15]=t;const o=(n[15]+1)*5;return n[13]=o,n}function Je(r){let e,t,n="Estado del anuncio <span>*</span>",o,a,l,v="-- estado del anuncio",d,A="Activado",f,m="Desactivado",q,y,V="Título del anuncio <span>*</span>",h,N,D,M,z="Descripción del anuncio <span>*</span>",ie,g,de,Y,Ie="Selecciona una Lista de Promociones <span>*</span>",fe,w,L,Me="--selecciona una lista",pe,Z,Le="¿Qué tipo de anuncio es? <span>*</span>",me,E,S,Se="-- seleciona tipo de anuncio",H,we="Descuento",j,Ae="Presentación",he,ee,De="¿Qué cantidad de descuento quieres dar? <span>*</span>",ve,re,te,be,Ce,ne,xe,B,Te,ae,ge,Pe,oe,ye,Q,Ee,X,se,Oe,He,x=r[2]&&Ke(r),P=r[1]&&Ve(r),U=!r[3]&&Lt(),F=r[3]&&St(),R=!r[3]&&wt(),J=r[3]&&At();return{c(){e=u("form"),t=u("p"),t.innerHTML=n,o=b(),a=u("select"),l=u("option"),l.textContent=v,d=u("option"),d.textContent=A,f=u("option"),f.textContent=m,q=b(),y=u("p"),y.innerHTML=V,h=b(),N=u("input"),D=b(),M=u("p"),M.innerHTML=z,ie=b(),g=u("textarea"),de=b(),Y=u("p"),Y.innerHTML=Ie,fe=b(),w=u("select"),L=u("option"),L.textContent=Me,x&&x.c(),pe=b(),Z=u("p"),Z.innerHTML=Le,me=b(),E=u("select"),S=u("option"),S.textContent=Se,H=u("option"),H.textContent=we,j=u("option"),j.textContent=Ae,he=b(),ee=u("p"),ee.innerHTML=De,ve=b(),P&&P.c(),re=b(),te=u("p"),be=G("Miniatura de tu anuncio (hasta 4MB) "),U&&U.c(),Ce=b(),ne=u("span"),F&&F.c(),xe=b(),B=u("input"),Te=b(),ae=u("p"),ge=G("Imagen principal del anuncio (hasta 4MB) "),R&&R.c(),Pe=b(),oe=u("span"),J&&J.c(),ye=b(),Q=u("input"),Ee=b(),X=u("input"),this.h()},l(O){e=_(O,"FORM",{});var s=k(e);t=_(s,"P",{"data-svelte-h":!0}),T(t)!=="svelte-11jqyav"&&(t.innerHTML=n),o=C(s),a=_(s,"SELECT",{name:!0,class:!0});var ce=k(a);l=_(ce,"OPTION",{"data-svelte-h":!0}),T(l)!=="svelte-1jda56f"&&(l.textContent=v),d=_(ce,"OPTION",{"data-svelte-h":!0}),T(d)!=="svelte-18zyo56"&&(d.textContent=A),f=_(ce,"OPTION",{"data-svelte-h":!0}),T(f)!=="svelte-15pvqww"&&(f.textContent=m),ce.forEach(p),q=C(s),y=_(s,"P",{"data-svelte-h":!0}),T(y)!=="svelte-1od3yry"&&(y.innerHTML=V),h=C(s),N=_(s,"INPUT",{type:!0,name:!0,maxlength:!0,placeholder:!0,class:!0}),D=C(s),M=_(s,"P",{"data-svelte-h":!0}),T(M)!=="svelte-70jorq"&&(M.innerHTML=z),ie=C(s),g=_(s,"TEXTAREA",{name:!0,class:!0,placeholder:!0,maxlength:!0,cols:!0,rows:!0}),k(g).forEach(p),de=C(s),Y=_(s,"P",{"data-svelte-h":!0}),T(Y)!=="svelte-mzyk5"&&(Y.innerHTML=Ie),fe=C(s),w=_(s,"SELECT",{name:!0,class:!0});var ke=k(w);L=_(ke,"OPTION",{"data-svelte-h":!0}),T(L)!=="svelte-kfvh7q"&&(L.textContent=Me),x&&x.l(ke),ke.forEach(p),pe=C(s),Z=_(s,"P",{"data-svelte-h":!0}),T(Z)!=="svelte-qgxevo"&&(Z.innerHTML=Le),me=C(s),E=_(s,"SELECT",{name:!0,class:!0,id:!0});var ue=k(E);S=_(ue,"OPTION",{"data-svelte-h":!0}),T(S)!=="svelte-17iwxnk"&&(S.textContent=Se),H=_(ue,"OPTION",{"data-svelte-h":!0}),T(H)!=="svelte-1i0xdni"&&(H.textContent=we),j=_(ue,"OPTION",{"data-svelte-h":!0}),T(j)!=="svelte-106y8by"&&(j.textContent=Ae),ue.forEach(p),he=C(s),ee=_(s,"P",{"data-svelte-h":!0}),T(ee)!=="svelte-7agp8u"&&(ee.innerHTML=De),ve=C(s),P&&P.l(s),re=C(s),te=_(s,"P",{});var qe=k(te);be=W(qe,"Miniatura de tu anuncio (hasta 4MB) "),U&&U.l(qe),qe.forEach(p),Ce=C(s),ne=_(s,"SPAN",{class:!0});var je=k(ne);F&&F.l(je),je.forEach(p),xe=C(s),B=_(s,"INPUT",{type:!0,name:!0,accept:!0,class:!0}),Te=C(s),ae=_(s,"P",{});var Ne=k(ae);ge=W(Ne,"Imagen principal del anuncio (hasta 4MB) "),R&&R.l(Ne),Ne.forEach(p),Pe=C(s),oe=_(s,"SPAN",{class:!0});var ze=k(oe);J&&J.l(ze),ze.forEach(p),ye=C(s),Q=_(s,"INPUT",{type:!0,name:!0,accept:!0,class:!0}),Ee=C(s),X=_(s,"INPUT",{type:!0,name:!0,class:!0}),s.forEach(p),this.h()},h(){l.__value="",$(l,l.__value),l.selected=!0,l.disabled=!0,d.__value="Activado",$(d,d.__value),f.__value="Desactivado",$(f,f.__value),c(a,"name","estado"),c(a,"class","box"),a.required=!0,c(N,"type","text"),c(N,"name","título"),c(N,"maxlength","100"),N.required=!0,c(N,"placeholder","Escribe aquí el título"),c(N,"class","box"),c(g,"name","descripción"),c(g,"class","box"),g.required=!0,c(g,"placeholder","Descripción clara de tu anuncio"),c(g,"maxlength","1000"),c(g,"cols","30"),c(g,"rows","10"),L.__value="",$(L,L.__value),L.disabled=!0,L.selected=!0,c(w,"name","promoción"),c(w,"class","box"),w.required=!0,S.__value="",$(S,S.__value),S.selected=!0,S.disabled=!0,H.__value="Descuento",$(H,H.__value),j.__value="Presentacion",$(j,j.__value),c(E,"name","tipo"),c(E,"class","box"),c(E,"id","tipo"),E.required=!0,r[1]===void 0&&ot(()=>r[6].call(E)),c(ne,"class","text-[var(--light-color)]"),c(B,"type","file"),c(B,"name","miniatura_archivo"),c(B,"accept","image/*"),B.required=!r[3],c(B,"class","box"),c(oe,"class","text-[var(--light-color)]"),c(Q,"type","file"),c(Q,"name","promo_archivo"),c(Q,"accept","image/*"),Q.required=!r[3],c(Q,"class","box"),c(X,"type","submit"),X.value="Subir anuncio",c(X,"name","submit"),c(X,"class","btn")},m(O,s){I(O,e,s),i(e,t),i(e,o),i(e,a),i(a,l),i(a,d),i(a,f),i(e,q),i(e,y),i(e,h),i(e,N),i(e,D),i(e,M),i(e,ie),i(e,g),i(e,de),i(e,Y),i(e,fe),i(e,w),i(w,L),x&&x.m(w,null),i(e,pe),i(e,Z),i(e,me),i(e,E),i(E,S),i(E,H),i(E,j),Be(E,r[1],!0),i(e,he),i(e,ee),i(e,ve),P&&P.m(e,null),i(e,re),i(e,te),i(te,be),U&&U.m(te,null),i(e,Ce),i(e,ne),F&&F.m(ne,null),i(e,xe),i(e,B),i(e,Te),i(e,ae),i(ae,ge),R&&R.m(ae,null),i(e,Pe),i(e,oe),J&&J.m(oe,null),i(e,ye),i(e,Q),i(e,Ee),i(e,X),se=!0,Oe||(He=[lt(E,"change",r[6]),it(r[4].call(null,e))],Oe=!0)},p(O,s){O[2]?x?(x.p(O,s),s&4&&K(x,1)):(x=Ke(O),x.c(),K(x,1),x.m(w,null)):x&&(et(),le(x,1,1,()=>{x=null}),Ye()),s&2&&Be(E,O[1]),O[1]?P?P.p(O,s):(P=Ve(O),P.c(),P.m(e,re)):P&&(P.d(1),P=null)},i(O){se||(K(x),se=!0)},o(O){le(x),se=!1},d(O){O&&p(e),x&&x.d(),P&&P.d(),U&&U.d(),F&&F.d(),R&&R.d(),J&&J.d(),Oe=!1,rt(He)}}}function Ke(r){let e,t;return e=new gt({props:{collection_id:"lista_promociones",clave:"tutor_id",valor:r[2].id,$$slots:{vacío:[Nt],artículo:[qt,({artículo:n})=>({16:n}),({artículo:n})=>n?65536:0]},$$scope:{ctx:r}}}),{c(){Xe(e.$$.fragment)},l(n){Ge(e.$$.fragment,n)},m(n,o){We(e,n,o),t=!0},p(n,o){const a={};o&4&&(a.valor=n[2].id),o&196608&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(K(e.$$.fragment,n),t=!0)},o(n){le(e.$$.fragment,n),t=!1},d(n){Ze(e,n)}}}function qt(r){let e,t=r[16].título+"",n,o;return{c(){e=u("option"),n=G(t),this.h()},l(a){e=_(a,"OPTION",{slot:!0});var l=k(e);n=W(l,t),l.forEach(p),this.h()},h(){c(e,"slot","artículo"),e.__value=o=r[16].id,$(e,e.__value)},m(a,l){I(a,e,l),i(e,n)},p(a,l){l&65536&&t!==(t=a[16].título+"")&&st(n,t),l&65536&&o!==(o=a[16].id)&&(e.__value=o,$(e,e.__value))},d(a){a&&p(e)}}}function Nt(r){let e,t="Aún no se han creado Listas de Promociones!";return{c(){e=u("option"),e.textContent=t,this.h()},l(n){e=_(n,"OPTION",{slot:!0,"data-svelte-h":!0}),T(e)!=="svelte-yde043"&&(e.textContent=t),this.h()},h(){c(e,"slot","vacío"),e.__value="",$(e,e.__value),e.disabled=!0},m(n,o){I(n,e,o)},p:_e,d(n){n&&p(e)}}}function Ve(r){let e;function t(a,l){return a[1]==="Descuento"?It:$t}let n=t(r),o=n(r);return{c(){o.c(),e=Qe()},l(a){o.l(a),e=Qe()},m(a,l){o.m(a,l),I(a,e,l)},p(a,l){n===(n=t(a))&&o?o.p(a,l):(o.d(1),o=n(a),o&&(o.c(),o.m(e.parentNode,e)))},d(a){a&&p(e),o.d(a)}}}function $t(r){let e,t,n="-- seleciona cantidad o si no aplica",o,a="No Aplica";return{c(){e=u("select"),t=u("option"),t.textContent=n,o=u("option"),o.textContent=a,this.h()},l(l){e=_(l,"SELECT",{name:!0,class:!0,id:!0});var v=k(e);t=_(v,"OPTION",{"data-svelte-h":!0}),T(t)!=="svelte-oqb8x2"&&(t.textContent=n),o=_(v,"OPTION",{"data-svelte-h":!0}),T(o)!=="svelte-2vng0n"&&(o.textContent=a),v.forEach(p),this.h()},h(){t.__value="",$(t,t.__value),t.selected=!0,t.disabled=!0,o.__value="No-Aplica",$(o,o.__value),c(e,"name","porcentaje"),c(e,"class","box"),c(e,"id","discounts"),e.required=!0},m(l,v){I(l,e,v),i(e,t),i(e,o)},p:_e,d(l){l&&p(e)}}}function It(r){let e,t,n="-- seleciona cantidad o si no aplica",o=ft(new Array(5)),a=[];for(let l=0;l<o.length;l+=1)a[l]=Mt(kt(r,o,l));return{c(){e=u("select"),t=u("option"),t.textContent=n;for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=_(l,"SELECT",{name:!0,class:!0,id:!0});var v=k(e);t=_(v,"OPTION",{"data-svelte-h":!0}),T(t)!=="svelte-oqb8x2"&&(t.textContent=n);for(let d=0;d<a.length;d+=1)a[d].l(v);v.forEach(p),this.h()},h(){t.__value="",$(t,t.__value),t.selected=!0,t.disabled=!0,c(e,"name","porcentaje"),c(e,"class","box"),c(e,"id","discounts"),e.required=!0},m(l,v){I(l,e,v),i(e,t);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null)},p:_e,d(l){l&&p(e),ut(a,l)}}}function Mt(r){let e,t,n;return{c(){e=u("option"),t=G(r[13]),n=G("%"),this.h()},l(o){e=_(o,"OPTION",{});var a=k(e);t=W(a,r[13]),n=W(a,"%"),a.forEach(p),this.h()},h(){e.__value=r[13]+"%",$(e,e.__value)},m(o,a){I(o,e,a),i(e,t),i(e,n)},p:_e,d(o){o&&p(e)}}}function Lt(r){let e,t="*";return{c(){e=u("span"),e.textContent=t},l(n){e=_(n,"SPAN",{"data-svelte-h":!0}),T(e)!=="svelte-140b0co"&&(e.textContent=t)},m(n,o){I(n,e,o)},d(n){n&&p(e)}}}function St(r){let e;return{c(){e=G("Déjalo en blanco si no quieres cambiarlo")},l(t){e=W(t,"Déjalo en blanco si no quieres cambiarlo")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function wt(r){let e,t="*";return{c(){e=u("span"),e.textContent=t},l(n){e=_(n,"SPAN",{"data-svelte-h":!0}),T(e)!=="svelte-140b0co"&&(e.textContent=t)},m(n,o){I(n,e,o)},d(n){n&&p(e)}}}function At(r){let e;return{c(){e=G("Déjalo en blanco si no quieres cambiarlo")},l(t){e=W(t,"Déjalo en blanco si no quieres cambiarlo")},m(t,n){I(t,e,n)},d(t){t&&p(e)}}}function Dt(r){let e,t,n,o,a,l="Preparar Anuncio",v,d,A;t=new bt({});let f=(!r[3]||r[0])&&Je(r);return{c(){e=b(),Xe(t.$$.fragment),n=b(),o=u("section"),a=u("h1"),a.textContent=l,v=b(),d=u("section"),f&&f.c(),this.h()},l(m){nt("svelte-vf30km",document.head).forEach(p),e=C(m),Ge(t.$$.fragment,m),n=C(m),o=_(m,"SECTION",{class:!0});var y=k(o);a=_(y,"H1",{class:!0,"data-svelte-h":!0}),T(a)!=="svelte-1f5alz7"&&(a.textContent=l),v=C(y),d=_(y,"SECTION",{class:!0});var V=k(d);f&&f.l(V),V.forEach(p),y.forEach(p),this.h()},h(){document.title="Preparar Anuncio",c(a,"class","heading"),c(d,"class","form-container"),c(o,"class","anunciantes")},m(m,q){I(m,e,q),We(t,m,q),I(m,n,q),I(m,o,q),i(o,a),i(o,v),i(o,d),f&&f.m(d,null),A=!0},p(m,[q]){!m[3]||m[0]?f?(f.p(m,q),q&1&&K(f,1)):(f=Je(m),f.c(),K(f,1),f.m(d,null)):f&&(et(),le(f,1,1,()=>{f=null}),Ye())},i(m){A||(K(t.$$.fragment,m),K(f),A=!0)},o(m){le(t.$$.fragment,m),le(f),A=!1},d(m){m&&(p(e),p(n),p(o)),Ze(t,m),f&&f.d()}}}function Ht(r,e,t){let{data:n}=e;const{anuncio_id:o}=n;let a,l,v;const d=o!=="nuevo",A=Ct.subscribe(h=>{t(2,v=h)}),{form:f,setInitialValues:m}=yt({onSubmit:async h=>{await y(async()=>{var D,M,z;if((D=h.miniatura_archivo)!=null&&D.name.length){const g=`${$e()}.${(z=(M=h.miniatura_archivo)==null?void 0:M.name.match(/\.(.+)$/))==null?void 0:z[1]}`;await Ue(Fe(Re(),`contenido/${g}`),h.miniatura_archivo),h.miniatura=g}}),delete h.miniatura_archivo,await y(async()=>{var D,M,z;if((D=h.promo_archivo)!=null&&D.name.length){const g=`${$e()}.${(z=(M=h.promo_archivo)==null?void 0:M.name.match(/\.(.+)$/))==null?void 0:z[1]}`;await Ue(Fe(Re(),`contenido/${g}`),h.promo_archivo),h.promo=g}}),delete h.promo_archivo;const N=d?o:$e();await y(async()=>{vt("contenido",N,{...h,id:N,tutor_id:sessionStorage.getItem("user_id"),fecha:new Date().getTime()})}),Tt.set(`Anuncio ${d?"actualizado":"creado"} con éxito`),ht(d?`/ver-tu-anuncio/${o}`:"/tus-anuncios")}}),q=xt.subscribe(async h=>{t(0,a=h??(await mt("contenido","id",o))[0]),d&&a&&m(a)}),y=async h=>{try{await h()}catch(N){pt(N,{icon:Pt})}};at(()=>{q(),A()});function V(){l=ct(this),t(1,l)}return r.$$set=h=>{"data"in h&&t(5,n=h.data)},[a,l,v,d,f,n,V]}class Zt extends _t{constructor(e){super(),dt(this,e,Ht,Dt,tt,{data:5})}}export{Zt as component,Yt as universal};
